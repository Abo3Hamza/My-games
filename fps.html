<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø±Ø© ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #367543;
            position: relative;
            overflow: hidden;
        }

        .container {
            background: #367543;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgb(253, 252, 252);
            position: relative;
        }

        .victory-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            font-size: 5rem;
            z-index: 1000;
            animation: celebrate 1s ease-out;
        }

        .computer-win {
            background: rgba(244, 4, 24, 0.3);
            animation: computer-celebrate 1s ease-out;
        }

        @keyframes celebrate {
            0% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1.5); }
            100% { opacity: 0; transform: scale(1); }
        }

        @keyframes computer-celebrate {
            0% { transform: rotate(0deg) scale(0); }
            25% { transform: rotate(30deg) scale(1.2); }
            50% { transform: rotate(-30deg) scale(1.5); }
            75% { transform: rotate(20deg) scale(1.2); }
            100% { transform: rotate(0deg) scale(1); }
        }

        .final-result {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #45d1b7;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 20px rgb(0, 0, 0);
            text-align: center;
            display: none;
            z-index: 2000;
            animation: final-popup 0.5s ease-out;
        }

        @keyframes final-popup {
            from { transform: translate(-50%, -50%) scale(0); }
            to { transform: translate(-50%, -50%) scale(1); }
        }

        .input-group {
            margin: 10px 0;
        }

        input[type="number"] {
            padding: 2px;
            width: 80px;
            margin-left: 10px;
        }

        /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø¯ÙˆØ§Ø¦Ø± */
        .choices button {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            padding: 0;
            border: 3px solid #fff;
            background: #45d1b7;
            cursor: pointer;
        }

        .choices button span {
            display: none;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="victory-overlay" id="victoryOverlay"></div>
    <div class="final-result" id="finalResult"></div>

    <h1>Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø±Ø© ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ ğŸª¨ ğŸ“„ âœ‚ï¸</h1>

    <div class="input-section">
        <div class="input-group">
            <input type="text" id="nameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
            <input type="number" id="roundsInput" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª" min="1">
        </div>
        <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>

    <div class="choices" id="gameButtons" style="display: none;">
        <button onclick="playGame(1)">ğŸª¨<span> Ø­Ø¬Ø±Ø©</span></button>
        <button onclick="playGame(2)">ğŸ“„<span> ÙˆØ±Ù‚Ø©</span></button>
        <button onclick="playGame(3)">âœ‚ï¸<span> Ù…Ù‚Øµ</span></button>
    </div>

    <div class="result" id="result"></div>
    <div class="scores" id="scores"></div>
    <button onclick="resetGame()" style="background-color: #3c6ce7;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„</button>
</div>

<script>
    let playerName = "";
    let num_n = 0, num_c = 0, num = 0;
    let totalRounds = 0;
    let currentRound = 0;

    function triggerVictory(winner) {
        const overlay = document.getElementById('victoryOverlay');
        overlay.innerHTML = winner === 'player' ? 'ğŸ‰' : 'ğŸ¤–';
        overlay.className = `victory-overlay ${winner === 'computer' ? 'computer-win' : ''}`;
        overlay.style.display = 'flex';

        setTimeout(() => {
            overlay.style.display = 'none';
        }, 1000);
    }

    function showFinalResult() {
        const finalResult = document.getElementById('finalResult');
        let resultText = '';

        if(num_n > num_c) {
            resultText = `ğŸ† ${playerName} ÙØ§Ø² Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©!`;
        } else if(num_c > num_n) {
            resultText = "ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙØ§Ø² Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©!";
        } else {
            resultText = "ğŸ¤ Ø§Ù„ØªØ¹Ø§Ø¯Ù„!";
        }

        finalResult.innerHTML = `
                <h2>${resultText}</h2>
                <p>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:</p>
                <p>${playerName}: ${num_n} ÙÙˆØ²</p>
                <p>Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${num_c} ÙÙˆØ²</p>
                <p>Ø§Ù„ØªØ¹Ø§Ø¯Ù„Ø§Øª: ${num}</p>
                <button onclick="resetGame()">Ø§Ù„Ø¹Ø¨ Ù…Ø¬Ø¯Ø¯Ù‹Ø§</button>
            `;
        finalResult.style.display = 'block';
    }

    function startGame() {
        playerName = document.getElementById("nameInput").value;
        totalRounds = parseInt(document.getElementById("roundsInput").value);

        if(!playerName.trim() || !totalRounds || totalRounds < 1) {
            alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!");
            return;
        }

        document.getElementById("gameButtons").style.display = "flex";
        document.getElementById("nameInput").disabled = true;
        document.getElementById("roundsInput").disabled = true;
        updateScores();
    }

    function playGame(userChoice) {
        if(currentRound >= totalRounds) return;

        currentRound++;
        const choices = {1: "ğŸª¨ Ø­Ø¬Ø±Ø©", 2: "ğŸ“„ ÙˆØ±Ù‚Ø©", 3: "âœ‚ï¸ Ù…Ù‚Øµ"};
        const computerChoice = Math.floor(Math.random() * 3) + 1;

        let resultText = "";
        if ((userChoice === computerChoice+1) || (userChoice === 1 && computerChoice === 3)) {
            resultText = `<span class="emoji">ğŸ‰</span> Ø§Ù„ÙØ§Ø¦Ø²: ${playerName}`;
            num_n++;
            triggerVictory('player');
        } else if ((userChoice+1 ===  computerChoice) || (userChoice === 3 && computerChoice === 1)) {
            resultText = `<span class="emoji">ğŸ¤–</span> Ø§Ù„ÙØ§Ø¦Ø²: Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±`;
            num_c++;
            triggerVictory('computer');
        } else {
            resultText = `<span class="emoji">ğŸ¤</span> ØªØ¹Ø§Ø¯Ù„`;
            num++;
        }

        document.getElementById("result").innerHTML = `
                ${resultText}<br>
                ${playerName}: ${choices[userChoice]}<br>
                Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${choices[computerChoice]}
            `;

        updateScores();

        if(currentRound === totalRounds) {
            setTimeout(showFinalResult, 1000);
        }
    }

    function updateScores() {
        document.getElementById("scores").innerHTML = `
                <h3>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø¬ÙˆÙ„Ø© ${currentRound}/${totalRounds}):</h3>
                ${playerName}: ${num_n} ÙÙˆØ²<br>
                Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${num_c} ÙÙˆØ²<br>
                Ø§Ù„ØªØ¹Ø§Ø¯Ù„Ø§Øª: ${num}
            `;
    }

    function resetGame() {
        num_n = num_c = num = 0;
        currentRound = 0;
        document.getElementById("nameInput").disabled = false;
        document.getElementById("roundsInput").disabled = false;
        document.getElementById("gameButtons").style.display = "none";
        document.getElementById("result").innerHTML = "";
        document.getElementById("finalResult").style.display = "none";
        updateScores();
    }
</script>
</body>
</html>